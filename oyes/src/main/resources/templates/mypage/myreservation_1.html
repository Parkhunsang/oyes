<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}"
>
	<th:block th:insert="~{/header.html::header}"></th:block>
<!-- 
	<link rel="shortcut icon" th:href="@{/asset/img/common/favicon_eumc.ico" type="image/x-icon}" />
	<link rel="stylesheet" th:href="@{/asset/css/common/feCommon_seoul.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/asset/slick/slick.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/asset/slick/slick-theme.css}"/>
	<script src="/asset/js/jquery.min.js"></script>
	<script src="/asset/js/jquery-ui.min.js"></script>
	<script src="/asset/js/webfont.min.js"></script>
	<script src="/asset/js/kuhCommon.js"></script>
	<script src="/asset/js/jquery.printThis.js"></script>
	<script src="/asset/js/common.js"></script>
 -->	
<head>
 
<style type="text/css">
a.outpatient_cancel {
display:inline-block;
width:80px;
height:32px;
line-height:32px;
background:#1b7eaf;
border-radius:8px;
color:white;
}
</style>

</head>
<body>
	<div layout:fragment="contentFragment">

		<!-- header -->
		<!-- //header -->

		<!-- container -->
		<div class="container">
			
				
		<div class="contTopBar contTopBar-bg01">
			<!-- inner -->
			<div class="inner">
				<!-- breadcrumb -->
				<div class="breadcrumb cf">
					<strong class="he">현재 위치:</strong>
					<div class="item">
						<a th:href="@{/}" class="home ht">Home</a>
					</div>
					
					<div class="item">
						<em>마이페이지</em>
						<button type="button" class="bcLinkLayerBtn ht">주 메뉴 목록 열기</button>
						<ul class="bcLinkLayer">
							<li><a th:href="@{/mypage/myreservation_1}">마이페이지</a></li>
						</ul>
					</div>
					<div class="item">
						<em>외래진료 예약내역</em>
						<button type="button" class="bcLinkLayerBtn ht">서브 메뉴 목록 열기</button>
						<ul class="bcLinkLayer">
							<li><a th:href="@{/mypage/myreservation_1}">외래진료 예약내역</a></li>							
							<li><a th:href="@{/mypage/myfavoritedoctor}">관심의료진 관리</a></li>							
							<li><a th:href="@{/mypage/mythank}">내가쓴글</a></li>							
							<li><a th:href="@{/mypage/myinfo}">내 정보 관리</a></li>							
						</ul>	
					</div>
					
				</div>
				<!-- //breadcrumb -->



<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<script type="text/javascript">
$(function(){
	var url = window.location.href;
	var dec = $('h2.title').text();
	var siteTitle = $('head title').text();
	Kakao.init('8a7ce70a0329833253a66ddde14fc28d');
	$(".twitter").click(function(){
		share('twitter', url, '', '',dec);
		return false;
	});
	
	$(".faceBook").click(function(){
		share('facebook', url, '', '',dec);
	});
	
	$("#kakaostory-share-button").click(function(){
		share("kakao", url, '', '',dec);
		return false;
	});
	
	$(".url").click(function(){
		copyToClipboard(url);
		alert('URL이 복사되었습니다.\nCtrl+v를 이용하여 붙여넣기하실 수 있습니다.');
	});
});


function copyToClipboard(val) {
  var t = document.createElement("textarea");
  document.body.appendChild(t);
  t.value = val;
  t.select();
  document.execCommand('copy');
  document.body.removeChild(t);
}
	
function share(gubn, surl, imgLink, gname, dec) {
	console.log(surl + ' // ' + dec)
	if (gubn == 'twitter') {
  	window.open('http://twitter.com/share?text='+encodeURIComponent('이화여자대학교병원 | ' + dec)+'&url=' + encodeURIComponent(surl),'twittershare','width=500,height=400,scrollbars=no,resiable=no');
	} else if (gubn == "facebook") {
		var ua = navigator.userAgent;
		var slink = "https://www.facebook.com/dialog/feed?app_id=922614774754618&redirect_uri=" + encodeURIComponent(surl) + "&link=" + encodeURIComponent(surl);
		if (ua.indexOf("PIBS_APP") > -1) {
			document.location.href = slink;
		} else {
			window.open(slink,"facebook","width=1000,height=520,scrollbars=no,resiable=no");
		}
	} else {
    Kakao.Link.sendDefault({
    	objectType: 'feed',
    	content: {
      	title: dec,
        description: dec,
        imageUrl: 'https://seoul.eumc.ac.kr/asset/img/common/kakao_img.png',
        link: {
        	mobileWebUrl: surl,
          webUrl: surl
        }
      }
    });
	}
}

function defaultMailReg() {
	var url = '/common/emailReg.do';

	$.ajax({
		type: "GET",
		url: url,
		success: function(data)
		{
			feUI.modalMethod.viewLayer('modal-defaultMail');
			$("#defaultMailReg").html(data);
		}
	});
}

//인쇄
function printMain(obj){
	//common.print($("#content"), $("head title").text());
	document.print();
}
</script>
<div class="utilMenu">
	<a href="javascript:void(0)" role="button" class="email modalJs" onclick="defaultMailReg();"><i class="icon-email ht">메일</i></a>
	<div class="cont">
		<a href="#" role="button"><i class="icon-share ht">관심콘텐츠</i></a>
		<ul>
			<li><a href="#" role="button" class="twitter"><i class="icon-twitter ht">트위터</i></a></li>
			<li><a href="#" role="button" class="faceBook"><i class="icon-faceBook ht">페이스북</i></a></li>
			<li><a href="#" role="button" class="kakao" id="kakaostory-share-button"><i class="icon-kakao ht">카카오</i></a></li>
			<li><a href="#" role="button" class="url"><i class="icon-url ht">URL 공유</i></a></li>
		</ul>
	</div>
	<a th:href="@{/}" role="button" class="print" onclick="printMain(this);"><i class="icon-print ht">프린트</i></a>
	<span class="zoomOut">
		<button type="button" class="zoomOut minus ht">화면 축소</button>
	</span>
	<span class="zoomIn">
		<button type="button" class="zoomIn plus ht">화면 확대</button>
	</span>
</div>

<!-- 메일발송 레이아웃 -->
<section class="modal modal-sizeM modal-defaultMail" id="defaultMailReg"></section>
<!-- //메일발송 레이아웃 -->

			</div>
			<!-- //inner -->
		</div>
<script type="text/javascript">
		var locationInfo = {
			cate0: $(".viewTitle h3").text(),
			cate1: $(".breadcrumb em:eq(2)").text(),
			cate2: $(".breadcrumb em:eq(1)").text(),
			cate3: $(".breadcrumb em:eq(0)").text()
		}
</script>

				

<main id="content" class="content">
	<div class="inner">
		<div class="heading heading-depth01">
			<h2 class="title">내 진료 정보</h2>
		</div>
		<h3 class="he">외래진료 내역</h3>
		<!-- mypage_lnb -->
		


<!-- 마이페이지lnb -->
<div class="myInfo">
	<div class="info">
		<strong class="title">환자정보</strong>
		<ul class="bullet bullet-type01 bullet-inline">
			<li>
				이름
				<strong>[[${member.patient_name}]]</strong>
			</li>
			<li>
				환자번호
				<strong>[[${member.patient_no}]]</strong>
			</li>
			<li>
				휴대번호
				<strong>[[${member.mobile_no}]]</strong>
			</li>
		</ul>
		<div class="btnWrap">
			<!-- <a href="http://eumcs.medcerti.com" role="button" class="button button-sizeM" target="_blank">온라인 증명서 발급</a> -->
		</div>
	</div>
	<ul class="tab tab-col04">
		<li class="current">
			<a th:href="@{/mypage/myreservation_1}">외래진료 내역 <i></i></a>
		</li>
		<li >
			<a th:href="@{/mypage/myfavoritedoctor}">관심의료진 관리</a>
		</li>
		<li >
			<a th:href="@{/mypage/mythank}">내가쓴글</a>
		</li>
		<li >
			<a th:href="@{/mypage/myinfo}">내 정보 관리</a>
		</li>
	</ul>
</div>
<!-- //마이페이지lnb -->

<script type="text/javascript">
//마이페이지 환자번호 조회
$(function() {
	$('#ptnoChkBtn').click(function() {
		
		var now = new Date();
		var pastYear = now.getFullYear()-14;
		var month = now.getMonth()+1;
		var date = now.getDate();
		var pastToday;
		var imsiMonth = month < 10 ? "0" + month : month;
		var imsiday = date < 10 ? "0" + date : date;
		pastToday = pastYear + "" + imsiMonth + "" + imsiday;

		if('19710105' > pastToday) {
			callMyParentCertifyLayer();
		} else {
			callMySelfCertifyLayer();
		}
		
	});
});
</script>
		<!-- //mypage_lnb -->
		<ul class="tab tab-type02">
			<li class="current"><a th:href="@{/mypage/myreservation_1}" id="ptnoChkBtn">예약완료</a></li>
			<li><a th:href="@{/mypage/myreservation_2}" id="ptnoChkBtn">진료완료</a></li>
		</ul>
		<h4 class="he">예약완료</h4>
		<div class="table table-bg01">
			<table>
				<caption>예약완료 (예약일, 시간, 진료과, 진료의사, 관리)</caption>
				<colgroup>
					<col style="width: 16.67%;">
					<col style="width: 16.67%;">
					<col style="width: 16.67%;">
					<col style="width: 16.67%;">
					<col style="width: 16.67%;">
					<col style="width: 16.67%;">
				</colgroup>
				<thead>
					<tr>
						<th scope="col">진료예약일</th>
						<th scope="col">시간</th>
						<th scope="col">진료과</th>

						<th scope="col">진료의사</th>
						<th scope="col">상태</th>
						<th scope="col">관리</th>

					</tr>
				</thead>
				<tbody>
				
					<tr th:if="${list == null}">
						
							
								<td colspan="6" class="no-data"><p>예약내역이 없습니다.<br/>메뉴에서 '환자번호 조회'를 하시면 외래진료 예약내역을 보실 수 있습니다.</p></td>
							
							
						
					</tr>
					<tr  th:if="${list} != null" th:each="member:${list}">
						<td>[[${member.outpatient_date}]]</td>
						<td>[[${member.outpatient_time}]]</td>
						<td>[[${member.department_name}]]</td>

						<td>[[${member.doctor_name}]]</td>
						<td th:if="${member.outpatient_status}==1">예약중</td>
						<td th:if="${member.outpatient_status}==2">진료완료</td>
						<td th:if="${member.outpatient_status}==3">예약취소</td>
						<td th:if="${member.outpatient_status}==1">
							<a class="outpatient_cancel" th:href="@{/outpatient/outpatientDelete(outpatient_no=${member.outpatient_no})}">예약취소</a>
						</td>

					</tr>
				
				
				</tbody>
			</table>
		</div>
		
		<div class="panel panel-bg01 panel-tel">
			<div class="panel-body">
				<ul class="bullet bullet-type01 bullet-inline">
					<li>
						대표전화번호
						<strong class="bar">1522-7000</strong>
					</li>
					<li>
						응급의료센터
						<strong class="bar">02-6986-5119</strong>
					</li>
					<li>
						고객상담실
						<strong class="bar">02-6986-5573</strong>
					</li>
				</ul>
			</div>
		</div>
	</div>
</main>

	<script type="text/javascript">
		//의료진 프로필
		function drProfile(drSid, deptCd) {
			var url = '/doctor/basicInfo.do?dr_sid=' + drSid + "&dept_cd=" + deptCd;
			//var newWindow = window.open("about:blank");
			//newWindow.location.href=url;
			location.href=url;
		}

		function submitSearchForm(targetPageNumber) {
			location.href='./reservationList01.do?pageIndex='+targetPageNumber;
		}

		//예약취소
		function rsvCancel(pid, ptno, orddeptcd) {
			callRsvCancelAlertLayer(pid, ptno, orddeptcd);
		}

		function callRsvCancelAlertLayer(pid, ptno, orddeptcd) {
			var url = '/common/rsvCancelAlertLayer.do';

			$.ajax({
				type: "GET",
				url: url,
				data : {pid:pid, pt_no:ptno, orddeptcd:orddeptcd},
				success: function(data)
				{
					feUI.modalMethod.viewLayer('modal-alert');
					$("#alertMsgLayer").html(data);
				}
			});
		}
		
		//마이페이지 환자번호 조회
		$(function() {
			$('#ptnoChkBtn').ready(function() {
				var now = new Date();
				var pastYear = now.getFullYear()-14;
				var month = now.getMonth()+1;
				var date = now.getDate();
				var pastToday;
				pastToday = pastYear + "" + month + "" + date;

				if('' == ''){
					if('19710105' > pastToday) {
						callMyParentCertifyLayer();
					}else{
						callMySelfCertifyLayer();
					}
				}
			});
		});
	</script>
			<section class="modal modal-sizeXS modal-alert" id="alertMsgLayer"></section>
			<!-- 진료시간표 레이아웃 -->
			<section class="modal modal-sizeL modal-schedule" id="modalSchedule"></section>
			<!-- //진료시간표 레이아웃 -->
		</div>
		<!-- //container -->

		<!-- footer -->

		<!-- //footer -->

	</div>
</body>
<script src="/asset/js/jquery.bxslider.js"></script>
<script src="/asset/js/feSeries.min.js"></script>
<script src="/asset/js/feCommon.js"></script>
</html>